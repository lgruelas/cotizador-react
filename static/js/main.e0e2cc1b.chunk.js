(this.webpackJsonpcotizador=this.webpackJsonpcotizador||[]).push([[0],{123:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),o=t(10),c=t.n(o),r=(t(60),t(61),t(13)),s=t(18),i=t(47),m=t(48),d=t(54),h=t(49),u=t(14),p=t(53),E=t(52),b=t(19),f=t.n(b),y=t(2),v=t(3),g=t(50),_=t.n(g),N=t(12),C=(t(121),function(e){function a(e){var t;Object(i.a)(this,a),t=Object(d.a)(this,Object(h.a)(a).call(this,e));var n=new Date,l="".concat(n.getDate(),"/").concat(n.getMonth()>8?"":0).concat(n.getMonth()+1,"/").concat(n.getFullYear());return t.state={date1:l,date2:l,date3:l,date4:l,date5:l,quote1:"",quote2:"",quote3:"",quote4:"",quote5:"",total:"",savings:"",anual:"25 a\xf1os",sistema_solar:"",eficiencia:"",invest_return:"",client:"",service:"",power:"",panels:"",panel_power:"",panel_desc:"",total_big:"",anual_pay_solar:"",anual_pay_actual:"",savings_chart:"",savings_proportion:"",invest_return_big:"",subtotal_usd:"",iva_usd:"",total_usd:"",total_mxn:"",currency_rate:"",usd_rate:0,quantity1:"",description1:"",quantity2:"",description2:"",quantity3:"",description3:"",quantity4:"",description4:"",quantity5:"",description5:"",quantity6:"",description6:"",quantity7:"",description7:"",panel_quantity:"",table:[{month:"Enero",hours:"",consume:"",production:"",pay_before:"",pay_after:""},{month:"Febrero",hours:"",consume:"",production:"",pay_before:"",pay_after:""},{month:"Marzo",hours:"",consume:"",production:"",pay_before:"",pay_after:""},{month:"Abril",hours:"",consume:"",production:"",pay_before:"",pay_after:""},{month:"Mayo",hours:"",consume:"",production:"",pay_before:"",pay_after:""},{month:"Junio",hours:"",consume:"",production:"",pay_before:"",pay_after:""},{month:"Julio",hours:"",consume:"",production:"",pay_before:"",pay_after:""},{month:"Agosto",hours:"",consume:"",production:"",pay_before:"",pay_after:""},{month:"Septiembre",hours:"",consume:"",production:"",pay_before:"",pay_after:""},{month:"Octubre",hours:"",consume:"",production:"",pay_before:"",pay_after:""},{month:"Noviembre",hours:"",consume:"",production:"",pay_before:"",pay_after:""},{month:"Diciembre",hours:"",consume:"",production:"",pay_before:"",pay_after:""}],totals:[0,0,0,0,0]},t.handleSubmit=t.handleSubmit.bind(Object(u.a)(t)),t.handleChange=t.handleChange.bind(Object(u.a)(t)),t}return Object(p.a)(a,e),Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.getRates().then((function(a){e.setState({currency_rate:a.data.rates.MXN.toFixed(2)})}))}},{key:"getRates",value:function(){return f.a.get("https://api.exchangeratesapi.io/latest?symbols=MXN&base=USD")}},{key:"format_output",value:function(e){var a=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),t=parseFloat(this.state.totals[3])-parseFloat(this.state.totals[4]),n=parseFloat(e.total_usd),l=0==e.usd_rate?parseFloat(e.currency_rate):parseFloat(e.usd_rate);e.subtotal_usd=a.format(n/1.16),e.iva_usd=a.format(.16*n),e.total_mxn=a.format(n*l),e.total_big=e.total_mxn,e.total=e.total_mxn,e.total_usd=a.format(e.total_usd),e.panel_quantity=parseInt(e.panels).toFixed(2),e.panel_desc="".concat(e.panel_desc," ").concat(e.panel_power," watts"),e.power="".concat((parseInt(e.panel_power)*parseInt(e.panels)/1e3).toFixed(2)," KWp"),e.panel_power="De ".concat(e.panel_power," Wp"),e.panels="".concat(e.panels," paneles");for(var o=1;o<=7;o++)e["quantity".concat(o)]&&(e["quantity".concat(o)]=parseInt(e["quantity".concat(o)]).toFixed(2));e.savings=a.format(t),e.invest_return="".concat((parseFloat(this.state.totals[4])/t).toFixed(1)," a\xf1os"),e.anual_pay_solar=a.format(parseFloat(this.state.totals[4])),e.anual_pay_actual=a.format(parseFloat(this.state.totals[3])),e.savings_chart=e.savings,e.savings_proportion="".concat(Math.round(t/parseFloat(this.state.totals[3])*100),"%"),e.invest_return_big=e.invest_return,this.formatDictTable(e.table,a),this.formatDictTotals(e.totals,a)}},{key:"formatDictTable",value:function(e,a){e=e.map((function(e){e.production="".concat(a.format(e.production).slice(1),"KWh"),e.consume="".concat(a.format(e.consume).slice(1),"KWh"),e.pay_before="".concat(a.format(e.pay_before)," MXN"),e.pay_after="".concat(a.format(e.pay_after)," MXN")}))}},{key:"formatDictTotals",value:function(e,a){e[1]="".concat(a.format(e[1]).slice(1),"KWh"),e[2]="".concat(a.format(e[2]).slice(1),"KWh"),e[3]="".concat(a.format(e[3])," MXN"),e[4]="".concat(a.format(e[4])," MXN")}},{key:"handleSubmit",value:function(){var e=Object(s.a)({},this.state);this.format_output(e),f.a.post("https://5c2abf42.ngrok.io/generate",e,{headers:{"Content-Type":"application/json","Access-Control-Allow_Origin":"*","Content-Disposition":'attachment; filename="cotizacion.pdf"',"Content-Transfer-Encoding":"binary"},responseType:"blob"}).then((function(e){var a=window.URL.createObjectURL(new Blob([e.data])),t=document.createElement("a");t.href=a,t.setAttribute("download","cotizacion.pdf"),document.body.appendChild(t),t.click()}))}},{key:"handleChange",value:function(e){if("quote"==e.target.id)for(var a=1;a<=5;a++)this.setState(Object(r.a)({},"".concat(e.target.id).concat(a),"No. de cotizaci\xf3n: ".concat(e.target.value)));else this.setState(Object(r.a)({},e.target.id,e.target.value))}},{key:"calculateProduction",value:function(e,a){if(this.state.sistema_solar&&this.state.eficiencia){var t;t=Math.round(parseFloat(e.hours)*parseFloat(this.state.sistema_solar)*parseFloat(this.state.eficiencia)*31),a[2]=this.calculateNewTotal("production",e.month,t),this.setState((function(n){return{totals:a,table:n.table.map((function(a){return a.month===e.month?Object(s.a)({},a,{production:t}):a}))}}))}else this.setState({totals:a})}},{key:"calculatePaySolar",value:function(e,a){}},{key:"calculateNewTotal",value:function(e,a,t){a=a||"not_assigned";var n=0;return this.state.table.forEach((function(l){l.month===a?n+=t:l[e]&&(n+=parseFloat(l[e]))})),n}},{key:"forceUpdate",value:function(e,a){var t=this.state.totals,n=this.calculateNewTotal(a);switch(a){case"hours":t[0]=(n/12).toFixed(2),this.setState({totals:t});break;case"consume":t[1]=n.toFixed(2),this.setState({totals:t});break;case"pay_before":t[3]=n.toFixed(2),this.setState({totals:t});break;case"pay_after":t[4]=n.toFixed(2),this.setState({totals:t});break;case"production":t[2]=n.toFixed(2),this.setState({totals:t})}}},{key:"render",value:function(){var e=this,a={mode:"click",blurToSave:!0,afterSaveCell:function(a,t){e.forceUpdate(a,t)}};return l.a.createElement("div",{className:"container"},l.a.createElement("div",{style:{height:"10vh"}}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8 order-md-2 mb-4"},l.a.createElement(N.BootstrapTable,{data:this.state.table,tableHeaderClass:"thead-dark",cellEdit:a},l.a.createElement(N.TableHeaderColumn,{dataField:"month",isKey:!0},"Mes"),l.a.createElement(N.TableHeaderColumn,{dataField:"hours"},"Horas de irradiaci\xf3n"),l.a.createElement(N.TableHeaderColumn,{dataField:"consume"},"Consumo"),l.a.createElement(N.TableHeaderColumn,{dataField:"production"},"Producci\xf3n"),l.a.createElement(N.TableHeaderColumn,{dataField:"pay_before"},"Pago antes"),l.a.createElement(N.TableHeaderColumn,{dataField:"pay_after"},"Pago con energ\xeda solar")),l.a.createElement("table",{className:"table"},l.a.createElement("thead",{className:"thead-light"},l.a.createElement("tr",null,l.a.createElement("th",{scope:"col"},"Total"),l.a.createElement("th",{scope:"col"},this.state.totals[0]),l.a.createElement("th",{scope:"col"},this.state.totals[1]),l.a.createElement("th",{scope:"col"},this.state.totals[2]),l.a.createElement("th",{scope:"col"},this.state.totals[3]),l.a.createElement("th",{scope:"col"},this.state.totals[4]))))),l.a.createElement("div",{className:"col-md-4 order-md-1"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-6 offset-3"},l.a.createElement("img",{src:_.a,height:"120",width:"120",style:{marginBottom:"2vh"}}))),l.a.createElement("h4",{className:"mb-3"},"Arma tu proyecto"),l.a.createElement("label",{htmlFor:"client"},"Cliente"),l.a.createElement(y.a,{className:"mb-3"},l.a.createElement(v.a,{onChange:this.handleChange,id:"client"})),l.a.createElement("label",{htmlFor:"direccion"},"Direccion"),l.a.createElement(y.a,{className:"mb-3"},l.a.createElement(v.a,{id:"direccion"})),l.a.createElement("label",{htmlFor:"city"},"Ciudad"),l.a.createElement(y.a,{className:"mb-3"},l.a.createElement(v.a,{id:"city"})),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6 mb-3"},l.a.createElement("label",{htmlFor:"service"},"#\xa0Servicio"),l.a.createElement(y.a,{className:"mb-3"},l.a.createElement(v.a,{onChange:this.handleChange,id:"service"}))),l.a.createElement("div",{className:"col-md-6 mb-3"},l.a.createElement("label",{htmlFor:"quote"},"#\xa0Cotizacion"),l.a.createElement(y.a,{className:"mb-3"},l.a.createElement(v.a,{onChange:this.handleChange,maxLength:"4",id:"quote"})))),l.a.createElement("div",{className:"row mb-3"},l.a.createElement("div",{className:"col-md-12 mb-3"},l.a.createElement("label",{for:"tarifa"},"Tipo de tarifa"),l.a.createElement("select",{id:"tarifa",className:"browser-default custom-select"},l.a.createElement("option",{selected:!0},"1"),l.a.createElement("option",{value:"1"},"1A"),l.a.createElement("option",{value:"2"},"1B"),l.a.createElement("option",{value:"3"},"1C"),l.a.createElement("option",{value:"1"},"1D"),l.a.createElement("option",{value:"2"},"1E"),l.a.createElement("option",{value:"3"},"1F"),l.a.createElement("option",{value:"3"},"PDBT")))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-6 mb-3"},l.a.createElement("label",{htmlFor:"sistema_solar"},"Sistema solar"),l.a.createElement(y.a,{className:"mb-3"},l.a.createElement(v.a,{onChange:this.handleChange,id:"sistema_solar"}))),l.a.createElement("div",{className:"col-md-6 mb-3"},l.a.createElement("label",{htmlFor:"eficiencia"},"Eficienca"),l.a.createElement(y.a,{className:"mb-3"},l.a.createElement(v.a,{onChange:this.handleChange,id:"eficiencia"})))))),l.a.createElement("hr",{className:"mb-4"}),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-2 offset-2"},"Cantidad"),l.a.createElement("div",{className:"col-8"},"Descripci\xf3n")),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-2"},l.a.createElement("label",{for:"inversor"},"Paneles")),l.a.createElement(y.a,{className:"mb-3 col-2"},l.a.createElement(v.a,{onChange:this.handleChange,id:"panels",type:"number",step:"any"})),l.a.createElement(y.a,{className:"mb-3 col-6"},l.a.createElement(v.a,{onChange:this.handleChange,id:"panel_desc",type:"text"})),l.a.createElement(y.a,{className:"mb-3 col-2"},l.a.createElement(v.a,{onChange:this.handleChange,id:"panel_power",type:"number",placeholder:"Wp"}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-2"},l.a.createElement("label",{for:"inversor"})),l.a.createElement(y.a,{className:"mb-3 col-2"},l.a.createElement(v.a,{onChange:this.handleChange,id:"quantity1",type:"number",step:"any"})),l.a.createElement(y.a,{className:"mb-3 col-8"},l.a.createElement(v.a,{onChange:this.handleChange,id:"description1",type:"text"}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-2"},l.a.createElement("label",{for:"inversor"})),l.a.createElement(y.a,{className:"mb-3 col-2"},l.a.createElement(v.a,{onChange:this.handleChange,id:"quantity2",type:"number",step:"any"})),l.a.createElement(y.a,{className:"mb-3 col-8"},l.a.createElement(v.a,{onChange:this.handleChange,id:"description2",type:"text"}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-2"},l.a.createElement("label",{for:"inversor"})),l.a.createElement(y.a,{className:"mb-3 col-2"},l.a.createElement(v.a,{onChange:this.handleChange,id:"quantity3",type:"number",step:"any"})),l.a.createElement(y.a,{className:"mb-3 col-8"},l.a.createElement(v.a,{onChange:this.handleChange,id:"description3",type:"text"}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-2"},l.a.createElement("label",{for:"inversor"})),l.a.createElement(y.a,{className:"mb-3 col-2"},l.a.createElement(v.a,{onChange:this.handleChange,id:"quantity4",type:"number",step:"any"})),l.a.createElement(y.a,{className:"mb-3 col-8"},l.a.createElement(v.a,{onChange:this.handleChange,id:"description4",type:"text"}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-2"},l.a.createElement("label",{for:"inversor"})),l.a.createElement(y.a,{className:"mb-3 col-2"},l.a.createElement(v.a,{onChange:this.handleChange,id:"quantity5",type:"number",step:"any"})),l.a.createElement(y.a,{className:"mb-3 col-8"},l.a.createElement(v.a,{onChange:this.handleChange,id:"description5",type:"text"}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-2"},l.a.createElement("label",{for:"inversor"})),l.a.createElement(y.a,{className:"mb-3 col-2"},l.a.createElement(v.a,{onChange:this.handleChange,id:"quantity6",type:"number",step:"any"})),l.a.createElement(y.a,{className:"mb-3 col-8"},l.a.createElement(v.a,{onChange:this.handleChange,id:"description6",type:"text"}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-2"},l.a.createElement("label",{for:"inversor"})),l.a.createElement(y.a,{className:"mb-3 col-2"},l.a.createElement(v.a,{onChange:this.handleChange,id:"quantity7",type:"number",step:"any"})),l.a.createElement(y.a,{className:"mb-3 col-8"},l.a.createElement(v.a,{onChange:this.handleChange,id:"description7",type:"text"}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-2"},l.a.createElement("label",{htmlFor:"total_usd"},"Costo en dolares:")),l.a.createElement(y.a,{className:"mb-3 col-4"},l.a.createElement(v.a,{onChange:this.handleChange,id:"total_usd",step:"any",placeholder:"USD",type:"number"})),l.a.createElement("div",{className:"col-2"},l.a.createElement("label",{htmlFor:"usd_rate"},"Tasa de cambio:")),l.a.createElement(y.a,{className:"mb-3 col-4"},l.a.createElement(v.a,{id:"usd_rate",step:"any",onChange:this.handleChange,type:"number",defaultValue:this.state.currency_rate}))),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-3 offset-9"},l.a.createElement(E.a,{onClick:this.handleSubmit,variant:"primary",id:"submit",style:{width:"100%"}},"Enviar"))),l.a.createElement("footer",{className:"my-5 pt-5 text-muted text-center text-small"},l.a.createElement("p",{className:"mb-1"},"\xa9 2020-2022 Centro de Inteligencia en Ahorro de Energ\xeda"),l.a.createElement("ul",{className:"list-inline"},l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("a",{href:"#"},"Privacy")),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("a",{href:"#"},"Terms")),l.a.createElement("li",{className:"list-inline-item"},l.a.createElement("a",{href:"#"},"Support")))))}}]),a}(l.a.Component));var w=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(C,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(122);c.a.render(l.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},50:function(e,a,t){e.exports=t.p+"static/media/planet.2e71a093.png"},55:function(e,a,t){e.exports=t(123)},60:function(e,a,t){},61:function(e,a,t){}},[[55,1,2]]]);
//# sourceMappingURL=main.e0e2cc1b.chunk.js.map