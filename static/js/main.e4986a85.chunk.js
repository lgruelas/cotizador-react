(this.webpackJsonpcotizador=this.webpackJsonpcotizador||[]).push([[0],{124:function(e,a,t){"use strict";t.r(a);var n=t(0),o=t.n(n),l=t(10),r=t.n(l),i=(t(61),t(62),t(15)),c=t(52),s=t(13),m=t(47),d=t(48),h=t(54),u=t(49),p=t(12),b=t(55),_=t(53),E=t(19),y=t.n(E),f=t(3),v=t(2),g=t(50),N=t.n(g),C=t(14),w=(t(122),new Map([["Enero",0],["Febrero",0],["Marzo",0],["Abril",0],["Mayo",1],["Junio",1],["Julio",1],["Agosto",1],["Septiembre",1],["Octubre",1],["Noviembre",0],["Diciembre",0]])),j=[{bajo:.793,intermedio:.956,excedente:2.802,cantidad_bajo:75,cantidad_intermedio:65,intermedio_alto:1,cantidad_intermedio_alto:0},{bajo:.793,intermedio:.956,excedente:2.802,cantidad_bajo:75,intermedio_alto:1,cantidad_intermedio:65,cantidad_intermedio_alto:0}],F={hermosillo:{Enero:5.26,Febrero:5.67,Marzo:7.01,Abril:7.24,Mayo:6.98,Junio:6.7,Julio:5.98,Agosto:5.85,Septiembre:6.16,Octubre:6.21,Noviembre:5.65,Diciembre:5.12},obregon:{Enero:5.46,Febrero:5.88,Marzo:7.12,Abril:7.13,Mayo:7.05,Junio:6.59,Julio:5.92,Agosto:5.82,Septiembre:6.17,Octubre:6.2,Noviembre:5.74,Diciembre:5.23},nogales:{Enero:5.15,Febrero:5.51,Marzo:6.89,Abril:7.25,Mayo:7.15,Junio:6.73,Julio:5.64,Agosto:5.54,Septiembre:6.04,Octubre:6.02,Noviembre:5.57,Diciembre:5.01},guaymas:{Enero:5.46,Febrero:5.88,Marzo:7.12,Abril:7.13,Mayo:7.05,Junio:6.59,Julio:5.92,Agosto:5.82,Septiembre:6.17,Octubre:6.2,Noviembre:5.74,Diciembre:5.23}},x=function(e){function a(e){var t;Object(m.a)(this,a),t=Object(h.a)(this,Object(u.a)(a).call(this,e));var n=new Date,o="".concat(n.getDate(),"/").concat(n.getMonth()>8?"":0).concat(n.getMonth()+1,"/").concat(n.getFullYear());return t.state={date1:o,date2:o,date3:o,date4:o,date5:o,quote1:"",quote2:"",quote3:"",quote4:"",quote5:"",total:"",savings:"",adress:"",anual:"25 a\xf1os",sistema_solar:0,eficiencia:0,invest_return:"",client:"",service:"",power:"",panels:"",panel_power:"",panel_desc:"",total_big:"",anual_pay_solar:"",anual_pay_actual:"",savings_chart:"",savings_proportion:"",invest_return_big:"",subtotal_usd:"",iva_usd:"",saved_co2:0,saved_trees:0,total_usd:"",total_mxn:"",currency_rate:"",usd_rate:0,quantity1:"",description1:"",quantity2:"",description2:"",quantity3:"",description3:"",quantity4:"",description4:"",quantity5:"",description5:"",quantity6:"",description6:"",quantity7:"",description7:"",panel_quantity:"",city:"hermosillo",table:[{month:"Enero",consume:"",production:"",pay_before:"",pay_after:""},{month:"Febrero",consume:"",production:"",pay_before:"",pay_after:""},{month:"Marzo",consume:"",production:"",pay_before:"",pay_after:""},{month:"Abril",consume:"",production:"",pay_before:"",pay_after:""},{month:"Mayo",consume:"",production:"",pay_before:"",pay_after:""},{month:"Junio",consume:"",production:"",pay_before:"",pay_after:""},{month:"Julio",consume:"",production:"",pay_before:"",pay_after:""},{month:"Agosto",consume:"",production:"",pay_before:"",pay_after:""},{month:"Septiembre",consume:"",production:"",pay_before:"",pay_after:""},{month:"Octubre",consume:"",production:"",pay_before:"",pay_after:""},{month:"Noviembre",consume:"",production:"",pay_before:"",pay_after:""},{month:"Diciembre",consume:"",production:"",pay_before:"",pay_after:""}],totals:["0.00","0.00","0.00","0.00","0.00"],tarifa:"1"},t.pay_before_temps=j,t.handleSubmit=t.handleSubmit.bind(Object(p.a)(t)),t.handleChange=t.handleChange.bind(Object(p.a)(t)),t.handleChangeSelect=t.handleChangeSelect.bind(Object(p.a)(t)),t.handleChangeCity=t.handleChangeCity.bind(Object(p.a)(t)),t}return Object(b.a)(a,e),Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.getRates().then((function(a){e.setState({currency_rate:a.data.rates.MXN.toFixed(2)})}))}},{key:"getRates",value:function(){return y.a.get("https://api.exchangeratesapi.io/latest?symbols=MXN&base=USD")}},{key:"format_output",value:function(e){var a=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),t=parseFloat(this.state.totals[3])-parseFloat(this.state.totals[4]),n=parseFloat(e.total_usd),o=0===e.usd_rate?parseFloat(e.currency_rate):parseFloat(e.usd_rate),l=parseInt(e.panel_power)*parseInt(e.panels)/1e3;e.subtotal_usd=a.format(n/1.16),e.iva_usd=a.format(.16*n),e.total_mxn=a.format(n*o),e.total_big=e.total_mxn,e.total=e.total_mxn,e.total_usd=a.format(e.total_usd),e.panel_quantity=e.panels,e.panel_desc="".concat(e.panel_desc," ").concat(e.panel_power," watts"),e.power="".concat(l.toFixed(2)," KWp"),e.panel_power="De ".concat(e.panel_power," Wp"),e.panels="".concat(e.panels," paneles"),e.saved_co2=(.78*l).toFixed(3),e.saved_trees=a.format(11.7*l).slice(1,-3),e.savings=a.format(t),e.invest_return="".concat((n*o/t).toFixed(1)," a\xf1os"),e.anual_pay_solar=a.format(parseFloat(this.state.totals[4])),e.anual_pay_actual=a.format(parseFloat(this.state.totals[3])),e.savings_chart=e.savings,e.savings_proportion="".concat(Math.round(t/parseFloat(this.state.totals[3])*100),"%"),e.invest_return_big=e.invest_return,this.formatDictTable(e.table,a),this.formatDictTotals(e.totals,a)}},{key:"formatDictTable",value:function(e,a){e=e.map((function(e){e.production="".concat(a.format(e.production).slice(1),"KWh"),e.consume="".concat(a.format(e.consume).slice(1),"KWh"),e.pay_before="".concat(a.format(e.pay_before)," MXN"),e.pay_after="".concat(a.format(e.pay_after)," MXN")}))}},{key:"formatDictTotals",value:function(e,a){e[1]="".concat(a.format(e[1]).slice(1),"KWh"),e[2]="".concat(a.format(e[2]).slice(1),"KWh"),e[3]="".concat(a.format(e[3])," MXN"),e[4]="".concat(a.format(e[4])," MXN")}},{key:"handleSubmit",value:function(){var e=Object(s.a)({},this.state);e.table=this.state.table.map((function(e){return Object(s.a)({},e)})),e.totals=Object(c.a)(this.state.totals),this.format_output(e),y.a.post("https://0d5d1131.ngrok.io/generate",e,{headers:{"Content-Type":"application/json","Access-Control-Allow_Origin":"*","Content-Disposition":'attachment; filename="cotizacion.pdf"',"Content-Transfer-Encoding":"binary"},responseType:"blob"}).then((function(e){var a=window.URL.createObjectURL(new Blob([e.data])),t=document.createElement("a");t.href=a,t.setAttribute("download","cotizacion.pdf"),document.body.appendChild(t),t.click()}))}},{key:"handleChange",value:function(e){if("quote"===e.target.id)for(var a=1;a<=5;a++)this.setState(Object(i.a)({},"".concat(e.target.id).concat(a),"No. de cotizaci\xf3n: ".concat(e.target.value)));else this.setState(Object(i.a)({},e.target.id,e.target.value))}},{key:"calculateProduction",value:function(e){var a=this,t=this.state.table.map((function(e){return Object(s.a)({},e)})),n=0,o=!1;t.forEach((function(e){n=Math.round(F[a.state.city][e.month]*a.state.sistema_solar*a.state.eficiencia*31),e.production=n,e.pay_before&&(o=!0,e.pay_after=a.calculatePayAfter(e,e.pay_before,n))})),o&&(e[4]=this.calculateNewTotal("pay_after",t)),e[2]=this.calculateNewTotal("production",t),this.setState({table:t,totals:e})}},{key:"calculatePayBefore",value:function(e,a){var t=parseFloat(e.consume),n=0,o=0,l={bajo:t>this.pay_before_temps[w.get(e.month)].cantidad_bajo?this.pay_before_temps[w.get(e.month)].cantidad_bajo:0,intermedio:0,intermedio_alto:0};if(0===w.get(e.month)){l.intermedio=t-l.bajo>125?this.pay_before_temps[0].cantidad_intermedio:0;var r=l.intermedio+l.bajo;n=t>r?t-r:0,o=this.pay_before_temps[0].bajo*l.bajo+this.pay_before_temps[0].intermedio*l.intermedio+this.pay_before_temps[0].excedente*n}else{l.intermedio=t-l.bajo>300?this.pay_before_temps[1].cantidad_intermedio:t-l.bajo,l.intermedio_alto=Math.min(t-l.bajo-l.intermedio,this.pay_before_temps[1].cantidad_intermedio_alto),n=t>l.intermedio+l.intermedio_alto+l.bajo?t-l.intermedio_alto:0,o=this.pay_before_temps[1].bajo*l.bajo+this.pay_before_temps[1].intermedio*l.intermedio+this.pay_before_temps[1].excedente*n+this.pay_before_temps[1].intermedio_alto*l.intermedio_alto}var i=Math.round(o);if(a[3]=this.calculateNewTotal("pay_before",this.state.table,e.month,i),e.production){var c=this.calculatePayAfter(e,i,e.production);a[4]=this.calculateNewTotal("pay_after",this.state.table,e.month,c),this.setState((function(t){return{totals:a,table:t.table.map((function(a){return a.month===e.month?Object(s.a)({},a,{pay_before:i,pay_after:c}):a}))}}))}else this.setState((function(t){return{totals:a,table:t.table.map((function(a){return a.month===e.month?Object(s.a)({},a,{pay_before:i}):a}))}}))}},{key:"calculatePayAfter",value:function(e,a,t){var n=parseFloat(t),o=0,l=0,r={bajo:n>this.pay_before_temps[w.get(e.month)].cantidad_bajo?this.pay_before_temps[w.get(e.month)].cantidad_bajo:0,intermedio:0,intermedio_alto:0};if(0===w.get(e.month)){r.intermedio=n-r.bajo>125?this.pay_before_temps[0].cantidad_intermedio:n-r.bajo;var i=r.intermedio+r.bajo;o=n>i?n-i:0,l=this.pay_before_temps[0].bajo*r.bajo+this.pay_before_temps[0].intermedio*r.intermedio+this.pay_before_temps[0].excedente*o}else{r.intermedio=n-r.bajo>300?this.pay_before_temps[1].cantidad_intermedio:n-r.bajo,r.intermedio_alto=Math.min(n-r.bajo-r.intermedio,this.pay_before_temps[1].cantidad_intermedio_alto),o=n>r.intermedio+r.intermedio_alto+r.bajo?n-r.intermedio+r.bajo:0,l=this.pay_before_temps[1].bajo*r.bajo+this.pay_before_temps[1].intermedio*r.intermedio+this.pay_before_temps[1].excedente*o+this.pay_before_temps[1].intermedio_alto*r.intermedio_alto}return a-Math.round(l)}},{key:"calculateNewTotal",value:function(e,a,t,n){t=t||"not_assigned";var o=0;return a.forEach((function(a){a.month===t?o+=n:a[e]&&(o+=parseFloat(a[e]))})),o}},{key:"forceUpdate",value:function(e,a){var t=this.state.totals,n=this.calculateNewTotal(a,this.state.table);switch(a){case"consume":t[1]=n.toFixed(2);break;case"production":t[2]=n.toFixed(2);break;case"pay_before":t[3]=n.toFixed(2);break;case"pay_after":t[4]=n.toFixed(2)}this.setState({totals:t})}},{key:"handleChangeSelect",value:function(e){var a=e.target.value;this.setState((function(e){return{totals:e.totals.slice(0,3).concat(["0.00","0.00"]),tarifa:a,table:e.table.map((function(e){return Object(s.a)({},e,{pay_before:"",pay_after:""})}))}}))}},{key:"handleChangeCity",value:function(e){this.setState({city:e.target.value})}},{key:"render",value:function(){var e=this,a={mode:"click",blurToSave:!0,afterSaveCell:function(a,t){e.forceUpdate(a,t)}};return o.a.createElement("div",{className:"container"},o.a.createElement("div",{style:{height:"10vh"}}),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-8 order-md-2 mb-4"},o.a.createElement(C.BootstrapTable,{data:this.state.table,tableHeaderClass:"thead-dark",cellEdit:a},o.a.createElement(C.TableHeaderColumn,{dataField:"month",isKey:!0},"Mes"),o.a.createElement(C.TableHeaderColumn,{dataField:"consume"},"Consumo"),o.a.createElement(C.TableHeaderColumn,{dataField:"production",editable:!0},"Producci\xf3n"),o.a.createElement(C.TableHeaderColumn,{dataField:"pay_before",editable:!0},"Pago antes"),o.a.createElement(C.TableHeaderColumn,{dataField:"pay_after",editable:!0},"Pago con energ\xeda solar")),o.a.createElement("table",{className:"table"},o.a.createElement("thead",{className:"thead-light"},o.a.createElement("tr",null,o.a.createElement("th",{scope:"col"},"Total"),o.a.createElement("th",{scope:"col"},this.state.totals[1]),o.a.createElement("th",{scope:"col"},this.state.totals[2]),o.a.createElement("th",{scope:"col"},this.state.totals[3]),o.a.createElement("th",{scope:"col"},this.state.totals[4]))))),o.a.createElement("div",{className:"col-md-4 order-md-1"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-6 offset-3"},o.a.createElement("img",{src:N.a,height:"120",width:"120",style:{marginBottom:"2vh"}}))),o.a.createElement("h4",{className:"mb-3"},"Arma tu proyecto"),o.a.createElement("label",{htmlFor:"client"},"Cliente"),o.a.createElement(f.a,{className:"mb-3"},o.a.createElement(v.a,{onChange:this.handleChange,value:this.state.client,id:"client"})),o.a.createElement("label",{htmlFor:"adress"},"Direccion"),o.a.createElement(f.a,{className:"mb-3"},o.a.createElement(v.a,{id:"adress",onChange:this.handleChange,value:this.state.adress})),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-12 mb-3"},o.a.createElement("label",{htmlFor:"city"},"Ciudad"),o.a.createElement("select",{onChange:this.handleChangeCity,value:this.state.city,id:"city",className:"browser-default custom-select"},o.a.createElement("option",{value:"hermosillo"},"Hermosillo"),o.a.createElement("option",{value:"guaymas"},"Guaymas"),o.a.createElement("option",{value:"nogales"},"Nogales"),o.a.createElement("option",{value:"obregon"},"Obregon")))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6 mb-3"},o.a.createElement("label",{htmlFor:"service"},"#\xa0Servicio"),o.a.createElement(f.a,{className:"mb-3"},o.a.createElement(v.a,{onChange:this.handleChange,id:"service"}))),o.a.createElement("div",{className:"col-md-6 mb-3"},o.a.createElement("label",{htmlFor:"quote"},"#\xa0Cotizacion"),o.a.createElement(f.a,{className:"mb-3"},o.a.createElement(v.a,{onChange:this.handleChange,maxLength:"4",id:"quote"})))),o.a.createElement("div",{className:"row mb-3"},o.a.createElement("div",{className:"col-md-12 mb-3"},o.a.createElement("label",{htmlFor:"tarifa"},"Tipo de tarifa"),o.a.createElement("select",{onChange:this.handleChangeSelect,value:this.state.tarifa,id:"tarifa",className:"browser-default custom-select"},o.a.createElement("option",{value:"1"},"1"),o.a.createElement("option",{value:"1A"},"1A"),o.a.createElement("option",{value:"1B"},"1B"),o.a.createElement("option",{value:"1C"},"1C"),o.a.createElement("option",{value:"1D"},"1D"),o.a.createElement("option",{value:"1E"},"1E"),o.a.createElement("option",{value:"1F"},"1F"),o.a.createElement("option",{value:"PDBT"},"PDBT"),o.a.createElement("option",{value:"GDMTH"},"GDMTH"),o.a.createElement("option",{value:"GDMTO"},"GDMTO")))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6 mb-3"},o.a.createElement("label",{htmlFor:"sistema_solar"},"Sistema solar"),o.a.createElement(f.a,{className:"mb-3"},o.a.createElement(v.a,{onChange:this.handleChange,type:"number",step:"any",id:"sistema_solar"}))),o.a.createElement("div",{className:"col-md-6 mb-3"},o.a.createElement("label",{htmlFor:"eficiencia"},"Eficienca"),o.a.createElement(f.a,{className:"mb-3"},o.a.createElement(v.a,{onChange:this.handleChange,type:"number",step:"any",id:"eficiencia"})))))),o.a.createElement("hr",{className:"mb-4"}),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-2 offset-2"},"Cantidad"),o.a.createElement("div",{className:"col-8"},"Descripci\xf3n")),o.a.createElement("br",null),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-2"},o.a.createElement("label",{htmlFor:"inversor"},"Paneles")),o.a.createElement(f.a,{className:"mb-3 col-2"},o.a.createElement(v.a,{onChange:this.handleChange,id:"panels",type:"number"})),o.a.createElement(f.a,{className:"mb-3 col-6"},o.a.createElement(v.a,{onChange:this.handleChange,id:"panel_desc",type:"text"})),o.a.createElement(f.a,{className:"mb-3 col-2"},o.a.createElement(v.a,{onChange:this.handleChange,id:"panel_power",type:"number",placeholder:"Wp"}))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-2"},o.a.createElement("label",{htmlFor:"inversor"})),o.a.createElement(f.a,{className:"mb-3 col-2"},o.a.createElement(v.a,{onChange:this.handleChange,id:"quantity1",type:"number"})),o.a.createElement(f.a,{className:"mb-3 col-8"},o.a.createElement(v.a,{onChange:this.handleChange,id:"description1",type:"text"}))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-2"},o.a.createElement("label",{htmlFor:"inversor"})),o.a.createElement(f.a,{className:"mb-3 col-2"},o.a.createElement(v.a,{onChange:this.handleChange,id:"quantity2",type:"number"})),o.a.createElement(f.a,{className:"mb-3 col-8"},o.a.createElement(v.a,{onChange:this.handleChange,id:"description2",type:"text"}))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-2"},o.a.createElement("label",{htmlFor:"inversor"})),o.a.createElement(f.a,{className:"mb-3 col-2"},o.a.createElement(v.a,{onChange:this.handleChange,id:"quantity3",type:"number"})),o.a.createElement(f.a,{className:"mb-3 col-8"},o.a.createElement(v.a,{onChange:this.handleChange,id:"description3",type:"text"}))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-2"},o.a.createElement("label",{htmlFor:"inversor"})),o.a.createElement(f.a,{className:"mb-3 col-2"},o.a.createElement(v.a,{onChange:this.handleChange,id:"quantity4",type:"number"})),o.a.createElement(f.a,{className:"mb-3 col-8"},o.a.createElement(v.a,{onChange:this.handleChange,id:"description4",type:"text"}))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-2"},o.a.createElement("label",{htmlFor:"inversor"})),o.a.createElement(f.a,{className:"mb-3 col-2"},o.a.createElement(v.a,{onChange:this.handleChange,id:"quantity5",type:"number"})),o.a.createElement(f.a,{className:"mb-3 col-8"},o.a.createElement(v.a,{onChange:this.handleChange,id:"description5",type:"text"}))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-2"},o.a.createElement("label",{htmlFor:"inversor"})),o.a.createElement(f.a,{className:"mb-3 col-2"},o.a.createElement(v.a,{onChange:this.handleChange,id:"quantity6",type:"number"})),o.a.createElement(f.a,{className:"mb-3 col-8"},o.a.createElement(v.a,{onChange:this.handleChange,id:"description6",type:"text"}))),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-2"},o.a.createElement("label",{htmlFor:"inversor"})),o.a.createElement(f.a,{className:"mb-3 col-2"},o.a.createElement(v.a,{onChange:this.handleChange,id:"quantity7",type:"number"})),o.a.createElement(f.a,{className:"mb-3 col-8"},o.a.createElement(v.a,{onChange:this.handleChange,id:"description7",type:"text"}))),o.a.createElement("br",null),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-2"},o.a.createElement("label",{htmlFor:"total_usd"},"Costo en dolares:")),o.a.createElement(f.a,{className:"mb-3 col-4"},o.a.createElement(v.a,{onChange:this.handleChange,id:"total_usd",step:"any",placeholder:"USD",type:"number"})),o.a.createElement("div",{className:"col-2"},o.a.createElement("label",{htmlFor:"usd_rate"},"Tasa de cambio:")),o.a.createElement(f.a,{className:"mb-3 col-4"},o.a.createElement(v.a,{id:"usd_rate",step:"any",onChange:this.handleChange,type:"number",defaultValue:this.state.currency_rate}))),o.a.createElement("br",null),o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-3 offset-9"},o.a.createElement(_.a,{onClick:this.handleSubmit,variant:"primary",id:"submit",style:{width:"100%"}},"Enviar"))),o.a.createElement("footer",{className:"my-5 pt-5 text-muted text-center text-small"},o.a.createElement("p",{className:"mb-1"},"\xa9 2020-2022 Centro de Inteligencia en Ahorro de Energ\xeda"),o.a.createElement("ul",{className:"list-inline"},o.a.createElement("li",{className:"list-inline-item"},o.a.createElement("a",{href:"#"},"Privacy")),o.a.createElement("li",{className:"list-inline-item"},o.a.createElement("a",{href:"#"},"Terms")),o.a.createElement("li",{className:"list-inline-item"},o.a.createElement("a",{href:"#"},"Support")))))}}]),a}(o.a.Component);var M=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(x,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(123);r.a.render(o.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},50:function(e,a,t){e.exports=t.p+"static/media/planet.2e71a093.png"},56:function(e,a,t){e.exports=t(124)},61:function(e,a,t){},62:function(e,a,t){}},[[56,1,2]]]);
//# sourceMappingURL=main.e4986a85.chunk.js.map